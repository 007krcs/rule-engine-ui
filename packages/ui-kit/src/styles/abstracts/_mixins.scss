@use './functions' as fn;

@mixin focusRing {
  outline: var(--pf-ring-width, 3px) solid var(--pf-surface-focus);
  outline-offset: 2px;
}

@mixin scrollbar {
  scrollbar-color: color-mix(in srgb, var(--pf-surface-border) 70%, transparent) transparent;
  scrollbar-width: thin;

  &::-webkit-scrollbar {
    width: 10px;
    height: 10px;
  }

  &::-webkit-scrollbar-thumb {
    border-radius: var(--pf-radius-full);
    background: color-mix(in srgb, var(--pf-surface-border) 74%, transparent);
  }
}

@mixin noiseOverlay($opacity: var(--pf-noise-opacity, 0.03)) {
  position: relative;

  &::after {
    content: '';
    position: absolute;
    inset: 0;
    pointer-events: none;
    opacity: $opacity;
    background-image:
      radial-gradient(circle at 1px 1px, rgb(255 255 255 / 55%) 1px, transparent 0),
      radial-gradient(circle at 2px 2px, rgb(0 0 0 / 35%) 1px, transparent 0);
    background-size: 9px 9px, 13px 13px;
    mix-blend-mode: soft-light;
  }
}

@mixin appBackground($style: layered) {
  background-color: var(--pf-bg-0);
  background-image:
    radial-gradient(
      circle at var(--pf-light-x, 18%) var(--pf-light-y, 12%),
      color-mix(in srgb, var(--pf-bg-highlight, rgb(255 255 255 / 34%)) 88%, transparent) 0%,
      transparent 45%
    ),
    radial-gradient(
      circle at 86% 92%,
      color-mix(in srgb, var(--pf-bg-shadow, rgb(0 0 0 / 20%)) 72%, transparent) 0%,
      transparent 58%
    ),
    linear-gradient(160deg, var(--pf-bg-1), var(--pf-bg-2));

  @if $style == 3d {
    background-image:
      radial-gradient(circle at 10% 0%, rgb(255 255 255 / 28%), transparent 42%),
      radial-gradient(circle at 100% 100%, rgb(0 0 0 / 24%), transparent 46%),
      radial-gradient(circle at 65% 35%, rgb(255 255 255 / 8%), transparent 40%),
      linear-gradient(145deg, var(--pf-bg-1), var(--pf-bg-2));
  }
}

@mixin surface($elevation: md, $variant: solid) {
  border-radius: var(--pf-radius-lg);
  border: 1px solid var(--pf-surface-border);
  box-shadow: fn.elevation($elevation);

  @if $variant == glass {
    background-color: var(--pf-surface-layer);
    background:
      linear-gradient(180deg, rgb(255 255 255 / 35%), rgb(255 255 255 / 8%)),
      color-mix(in srgb, var(--pf-surface-layer) calc(var(--pf-surface-glass-opacity) * 100%), transparent);
    backdrop-filter: blur(var(--pf-surface-glass-blur));
  } @else {
    background-color: var(--pf-surface-layer);
    background:
      linear-gradient(
        180deg,
        color-mix(in srgb, var(--pf-surface-layer) 95%, transparent),
        color-mix(in srgb, var(--pf-surface-layer-alt) 90%, transparent)
      ),
      var(--pf-surface-layer);
  }

  box-shadow:
    inset 0 1px 0 rgb(255 255 255 / 26%),
    fn.elevation($elevation);
}

@mixin glass {
  @include surface(md, glass);
}
